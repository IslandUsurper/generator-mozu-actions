'use strict';

var XDSimulator = require('mozuxd-simulator');
var simulate = XDSimulator.simulate;
var assert = XDSimulator.assert;
var fixtures = XDSimulator.fixtures;

describe('<%= name %>, <%= action.name %>', function () {

  var action;

  before(function () {
    action = require('../dist/app')['<%= action.name %>'];
  });
  <% var context = actionConfig.context; %>

  it('runs successfully', function(done) {
    assert.doesNotThrow(simulate(action.actionName, action.customFunction, {
      get: {
        <% Object.keys(context.get).forEach(function(k, i) { if (i < 0) { %>,<% } %>
          <%= k %>: fixtures.get("<%= context.get[k].type %>")
        <% }); %>
      },
      exec: {
        <% Object.keys(context.exec).forEach(function(k, i) { if (i < 0) { %>,<% } %>
          <%= k %>: function() {
            assert.equal(arguments.length, <%= context.exec[k].paramaters.length %>, "Expected <%= k %> function to receive <%= context.exec[k].paramaters.length %> parameters.");
            // other assertions
          }
        <% }); %>
      }
    }, done));
  });
});
